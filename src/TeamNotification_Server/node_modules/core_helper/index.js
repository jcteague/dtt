var fs = require('fs');

var exports = {};
exports.require_all_files_in  = function(path,app){
    fs.readdirSync(path).forEach(function(file) {
        var stats = fs.lstatSync(path+ '/' +file);
        if (!stats.isDirectory() && (file.substr(-3) !== '.js' || file == "index.js")) return;

        var name = file;
        if(stats.isFile()) name = name.substr(0, name.indexOf('.'));

        var full_path = path + '/' + name;
        require(full_path).build_routes(app);
    });
};

module.exports = exports;

